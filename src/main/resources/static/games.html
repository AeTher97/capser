<html>
<head>
    <link rel="stylesheet" type="text/css" href="capsStyle.css">
</head>
<body>
<form>
    <div id="games">Loading...</div>
</form>

<form action="games.html" id="filter_form">
    <div>
        <h3>Filter</h3>
    </div>
    <div>
        <label for="id">Player id</label>
        <input type="text" name="id" id="id">
    </div>
    <div>
        <label>Sort By</label>
        <select name="GameType">
            <option value="SORT_BY">Sort By</option>
            <option value="SCORE">Score</option>
            <option value="REBUTTALS">Rebuttals</option>
        </select>
    </div>
    <div>
        <button>Filter</button>
    </div>
</form>
<br>
<form action="index.html">
    <div>
        <button>Go back</button>
    </div>
</form>

<div id="buildNumber" class="parent"></div>

<script>var data = null;

function findGetParameter(parameterName) {
    var result = null,
        tmp = [];
    location.search
        .substr(1)
        .split("&")
        .forEach(function (item) {
            tmp = item.split("=");
            if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
        });
    return result;
}

var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener("readystatechange", function () {
    if (this.readyState === 4) {
        console.log(this.responseText);
        document.getElementById("games").innerHTML = this.responseText;
    }
});

if (findGetParameter("id") != null) {
    xhr.open("GET", "/games" + "?id=" + findGetParameter("id"));
} else {
    xhr.open("GET", "/games");

}
xhr.setRequestHeader("User-Agent", "PostmanRuntime/7.15.0");
xhr.setRequestHeader("Accept", "*/*");
xhr.setRequestHeader("Cache-Control", "no-cache");
xhr.setRequestHeader("Postman-Token", "261bb4e1-ce3c-42c6-9a4a-2a2cbb387aaf,d09d24ad-be63-47b3-94e2-0a3f79aca57a");
xhr.setRequestHeader("Host", "localhost:8888");
xhr.setRequestHeader("accept-encoding", "gzip, deflate");
xhr.setRequestHeader("Connection", "keep-alive");
xhr.setRequestHeader("cache-control", "no-cache");

xhr.send(data);

var xhr2 = new XMLHttpRequest();
xhr2.withCredentials = true;

xhr2.addEventListener("readystatechange", function () {
    if (this.readyState === 4) {
        console.log(this.responseText);
        document.getElementById("buildNumber").innerHTML = this.responseText;
    }
});

xhr2.open("GET", "/version");
xhr2.setRequestHeader("User-Agent", "PostmanRuntime/7.15.0");
xhr2.setRequestHeader("Accept", "*/*");
xhr2.setRequestHeader("Cache-Control", "no-cache");
xhr2.setRequestHeader("Postman-Token", "261bb4e1-ce3c-42c6-9a4a-2a2cbb387aaf,d09d24ad-be63-47b3-94e2-0a3f79aca57a");
xhr2.setRequestHeader("Host", "localhost:8888");
xhr2.setRequestHeader("accept-encoding", "gzip, deflate");
xhr2.setRequestHeader("Connection", "keep-alive");
xhr2.setRequestHeader("cache-control", "no-cache");

xhr2.send(data);


</script>
</body>
</html>